"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function loadMap(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e],i=new google.maps.Marker({position:{lat:n.latitude-0,lng:n.longitude-0},map:map,title:n.name});i.content='<div class="infowindow"><h3>'+formatLink(n.url,n.name,"post_type")+"</h3><address>"+formatAddress(n.formatted_address)+"</address>";for(var r=null,s=0;s<n.meetings.length;s++){var a=n.meetings[s];r!=a.day&&(r&&(i.content+="</dl>"),r=a.day,"undefined"!=typeof days[r]&&(i.content+="<h5>"+days[r]+"</h5>"),i.content+="<dl>"),i.content+="<dt>"+a.time+"</dt><dd>"+formatLink(a.url,a.name,"post_type")+"</dd>"}i.content+="</dl></div>",google.maps.event.addListener(i,"click",function(t){return function(){infowindow.setContent(t.content),infowindow.open(map,t)}}(i)),bounds.extend(i.position),markers[markers.length]=i}markers.length>1?map.fitBounds(bounds):1==markers.length?(map.setCenter(bounds.getCenter()),jQuery("#map").is(":visible")&&google.maps.event.trigger(markers[0],"click"),map.setZoom(14)):0==markers.length}function formatAddress(t,e){if(t=t.split(", "),e)return t[0];if("USA"==t[t.length-1]){t.pop();var n=t.pop();t[t.length-1]+=", "+n}return t.join("<br>")}function formatLink(t,e,n){for(var i=location.search.substr(1).split("&"),r=[],s=0;s<i.length;s++){var a=i[s].split("=");a[0]!=n&&(r[r.length]=a[0]+"="+a[1])}return r.length&&(t+=(t.indexOf("?")==-1?"?":"&")+r.join("&")),'<a href="'+t+'">'+e+"</a>"}function updateQueryString(t,e,n){n||(n=window.location.href);var i,r=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(r.test(n))return"undefined"!=typeof e&&null!==e?n.replace(r,"$1"+t+"="+e+"$2$3"):(i=n.split("#"),n=i[0].replace(r,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof i[1]&&null!==i[1]&&(n+="#"+i[1]),n);if("undefined"!=typeof e&&null!==e){var s=n.indexOf("?")!==-1?"&":"?";return i=n.split("#"),n=i[0]+s+t+"="+e,"undefined"!=typeof i[1]&&null!==i[1]&&(n+="#"+i[1]),n}return n}function sanitize_title(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var e="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",n="aaaaeeeeiiiioooouuuunc------",i=0,r=e.length;i<r;i++)t=t.replace(new RegExp(e.charAt(i),"g"),n.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,e,n){"function"==typeof define&&define.amd?define(["jquery"],function(i){return t(e,n,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t(e,n,require("jquery")):t(e,n,jQuery)}(function(t,e,n){var i=function(){function n(t){_classCallCheck(this,n),this.ctx=t}return _createClass(n,[{key:"log",value:function i(t){var e=arguments.length<=1||void 0===arguments[1]?"debug":arguments[1],i=this.opt.log;this.opt.debug&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&"function"==typeof i[e]&&i[e]("mark.js: "+t)}},{key:"escapeStr",value:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(t){return t=this.escapeStr(t),Object.keys(this.opt.synonyms).length&&(t=this.createSynonymsRegExp(t)),this.opt.diacritics&&(t=this.createDiacriticsRegExp(t)),t=this.createMergedBlanksRegExp(t),t=this.createAccuracyRegExp(t)}},{key:"createSynonymsRegExp",value:function(t){var e=this.opt.synonyms;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],r=this.escapeStr(n),s=this.escapeStr(i);t=t.replace(new RegExp("("+r+"|"+s+")","gmi"),"("+r+"|"+s+")")}return t}},{key:"createDiacriticsRegExp",value:function(t){var e=["aÀÁÂÃÄÅàáâãäåĀāąĄ","cÇçćĆčČ","dđĐďĎ","eÈÉÊËèéêëěĚĒēęĘ","iÌÍÎÏìíîïĪī","lłŁ","nÑñňŇńŃ","oÒÓÔÕÕÖØòóôõöøŌō","rřŘ","sŠšśŚ","tťŤ","uÙÚÛÜùúûüůŮŪū","yŸÿýÝ","zŽžżŻźŹ"],n=[];return t.split("").forEach(function(i){e.every(function(e){if(e.indexOf(i)!==-1){if(n.indexOf(e)>-1)return!1;t=t.replace(new RegExp("["+e+"]","gmi"),"["+e+"]"),n.push(e)}return!0})}),t}},{key:"createMergedBlanksRegExp",value:function(t){return t.replace(/[\s]+/gim,"[\\s]*")}},{key:"createAccuracyRegExp",value:function(t){var e=this,n=this.opt.accuracy,i="string"==typeof n?n:n.value,r="string"==typeof n?[]:n.limiters,s="";switch(r.forEach(function(t){s+="|"+e.escapeStr(t)}),i){case"partially":return"()("+t+")";case"complementary":return"()([^\\s"+s+"]*"+t+"[^\\s"+s+"]*)";case"exactly":return"(^|\\s"+s+")("+t+")(?=$|\\s"+s+")"}}},{key:"getSeparatedKeywords",value:function(t){var e=this,n=[];return t.forEach(function(t){e.opt.separateWordSearch?t.split(" ").forEach(function(t){t.trim()&&n.push(t)}):t.trim()&&n.push(t)}),{keywords:n,length:n.length}}},{key:"getElements",value:function(){var t=void 0,e=[];return t="undefined"==typeof this.ctx?[]:this.ctx instanceof HTMLElement?[this.ctx]:Array.isArray(this.ctx)?this.ctx:Array.prototype.slice.call(this.ctx),t.forEach(function(t){if(e.indexOf(t)===-1){e.push(t);var n=t.querySelectorAll("*");n.length&&(e=e.concat(Array.prototype.slice.call(n)))}}),t.length||this.log("Empty context","warn"),{elements:e,length:e.length}}},{key:"matches",value:function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}},{key:"matchesExclude",value:function(t,e){var n=this,i=!0,r=this.opt.exclude.concat(["script","style","title"]);return this.opt.iframes||(r=r.concat(["iframe"])),e&&(r=r.concat(["*[data-markjs='true']"])),r.every(function(e){return!n.matches(t,e)||(i=!1)}),!i}},{key:"onIframeReady",value:function(t,e,n){try{!function(){var i=t.contentWindow,r="about:blank",s="complete",a=function(){try{if(null===i.document)throw new Error("iframe inaccessible");e(i.document)}catch(t){n()}},o=function(){var e=t.getAttribute("src").trim(),n=i.location.href;return n===r&&e!==r&&e},c=function(){var e=function i(){try{o()||(t.removeEventListener("load",i),a())}catch(e){n()}};t.addEventListener("load",e)};i.document.readyState===s?o()?c():a():c()}()}catch(i){n()}}},{key:"forEachElementInIframe",value:function(t,e){var n=this,i=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2],r=0,s=function(){--r<1&&i()};this.onIframeReady(t,function(t){var i=Array.prototype.slice.call(t.querySelectorAll("*"));0===(r=i.length)&&s(),i.forEach(function(t){"iframe"===t.tagName.toLowerCase()?!function(){var i=0;n.forEachElementInIframe(t,function(t,n){e(t,n),n-1===i&&s(),i++},s)}():(e(t,i.length),s())})},function(){var e=t.getAttribute("src");n.log("iframe '"+e+"' could not be accessed","warn"),s()})}},{key:"forEachElement",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1],i=arguments.length<=2||void 0===arguments[2]||arguments[2],r=this.getElements(),s=r.elements,a=r.length,o=function(){0===--a&&n()};o(++a),s.forEach(function(n){if(!e.matchesExclude(n,i)){if("iframe"===n.tagName.toLowerCase())return void e.forEachElementInIframe(n,function(n){e.matchesExclude(n,i)||t(n)},o);t(n)}o()})}},{key:"forEachNode",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];this.forEachElement(function(e){for(e=e.firstChild;e;e=e.nextSibling)3===e.nodeType&&e.textContent.trim()&&t(e)},e)}},{key:"wrapMatches",value:function(t,n,i,r,s){for(var a=this.opt.element?this.opt.element:"mark",o=i?0:2,c=void 0;null!==(c=n.exec(t.textContent));)if(r(c[o])){var u=c.index;i||(u+=c[o-1].length);var l=t.splitText(u);if(t=l.splitText(c[o].length),null!==l.parentNode){var h=e.createElement(a);h.setAttribute("data-markjs","true"),this.opt.className&&h.setAttribute("class",this.opt.className),h.textContent=c[o],l.parentNode.replaceChild(h,l),s(h)}n.lastIndex=0}}},{key:"unwrapMatches",value:function(t){for(var n=t.parentNode,i=e.createDocumentFragment();t.firstChild;)i.appendChild(t.removeChild(t.firstChild));n.replaceChild(i,t),n.normalize()}},{key:"markRegExp",value:function(t,e){var n=this;this.opt=e,this.log('Searching with expression "'+t+'"');var i=0,r=function(t){i++,n.opt.each(t)};this.forEachNode(function(e){n.wrapMatches(e,t,!0,function(t){return n.opt.filter(e,t,i)},r)},function(){0===i&&n.opt.noMatch(t),n.opt.done(i)})}},{key:"mark",value:function(t,e){var n=this;this.opt=e;var i=this.getSeparatedKeywords("string"==typeof t?[t]:t),r=i.keywords,s=i.length,a=0;0===s&&this.opt.done(a),r.forEach(function(t){var e=new RegExp(n.createRegExp(t),"gmi"),i=0,o=function(t){i++,a++,n.opt.each(t)};n.log('Searching with expression "'+e+'"'),n.forEachNode(function(r){n.wrapMatches(r,e,!1,function(){return n.opt.filter(r,t,i,a)},o)},function(){0===i&&n.opt.noMatch(t),r[s-1]===t&&n.opt.done(a)})})}},{key:"unmark",value:function(t){var e=this;this.opt=t;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.forEachElement(function(t){e.matches(t,n)&&e.unwrapMatches(t)},function(){e.opt.done()},!1)}},{key:"opt",set:function(e){this._opt=_extends({},{element:"",className:"",exclude:[],iframes:!1,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:t.console},e)},get:function(){return this._opt}}]),n}();return n.fn.mark=function(t,e){return new i(this).mark(t,e),this},n.fn.markRegExp=function(t,e){return new i(this).markRegExp(t,e),this},n.fn.unmark=function(t){return new i(this).unmark(t),this},n},window,document),function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){if(!(i=n.call(null,r,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){if(i=n.call(null,r,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,a,o=this,c=arguments;return s=function(){i=null,n||(r=t.apply(o,c))},a=n&&!i,clearTimeout(i),i=setTimeout(s,e),a&&(r=t.apply(o,c)),r}},throttle:function(t,e){var n,i,r,s,a,o;return a=0,o=function(){a=new Date,r=null,s=t.apply(n,i)},function(){var c=new Date,u=e-(c-a);return n=this,i=arguments,u<=0?(clearTimeout(r),r=null,a=c,s=t.apply(n,i)):r||(r=setTimeout(o,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n="0.11.1",i=function(){function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function n(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function i(t){return function(n){return n=e.isArray(n)?n:[].slice.call(arguments,0),function(i){var r=[];return e.each(n,function(n){r=r.concat(t(e.toStr(i[n])))}),r}}}return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}}}(),r=function(){function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new r(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),s=function(){function n(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=n||o,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(e){return t.parseJSON(e)}function a(t){var e,n,i=[],r=o.length;for(e=0;e<r;e++)(n=o.key(e)).match(t)&&i.push(n.replace(t,""));return i}var o;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(c){o=null}return e.mixin(n.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),s(this.ls.getItem(this._prefix(t)))},set:function(t,n,s){return e.isNumber(s)?this._safeSet(this._ttlKey(t),r(i()+s)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=a(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=s(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(n)&&i()>n)}}),n}(),a=function(){function n(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new r(0):o}var i=0,s={},a=6,o=new r(10);return n.setMaxPendingRequests=function(t){a=t},n.resetCache=function(){o.reset()},e.mixin(n.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function n(t){e(null,t),l._cache.set(c,t)}function r(){e(!0)}function o(){i--,delete s[c],l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var c,u,l=this;c=this._fingerprint(t),this.cancelled||c!==this.lastReq||((u=s[c])?u.done(n).fail(r):i<a?(i++,s[c]=this._send(t).done(n).fail(r).always(o)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var r,s;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(r=this._cache.get(s))?i(null,r):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),o=window.SearchIndex=function(){function n(n){n=n||{},n.datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[c]=[],t[o]={},t}function s(t){for(var e={},n=[],i=0,r=t.length;i<r;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function a(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,a=e.length;n<s&&i<a;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}var o="c",c="i";return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var s,a;n.datums[s=n.identify(t)]=t,a=i(n.datumTokenizer(t)),e.each(a,function(t){var e,i,a;for(e=n.trie,i=t.split("");a=i.shift();)e=e[o][a]||(e[o][a]=r()),e[c].push(s)})})},get:function(t){var n=this;return e.map(t,function(t){return n.datums[t]})},search:function(t){var n,r,u=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,s;if(r&&0===r.length)return!1;for(e=u.trie,n=t.split("");e&&(i=n.shift());)e=e[o][i];return e&&0===n.length?(s=e[c].slice(0),void(r=r?a(r,s):s)):(r=[],!1)}),r?e.map(s(r),function(t){return u.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),c=function(){function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function n(e){t(null,r.transform(e))}var i,r=this;t&&(i=this.prepare(this._settings()),this.transport(i).fail(e).done(n))},clear:function(){return this.storage.clear(),this}}),t}(),u=function(){function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new a({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function n(t,n){e(t?[]:r.transform(n))}var i,r=this;if(e)return t=t||"",i=this.prepare(t,this._settings()),this.transport.get(i,n)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),l=function(){function i(i){var r;return i?(r={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(r,i),!i.url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?o(i.transport):t.ajax,i):null}function r(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(i,n),!n.url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=s(n),n.limiter=a(n),n.transport=n.transport?o(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function s(t){function e(t,e){return e.url=s(e.url,t),e}function n(t,e){return e.url=e.url.replace(a,encodeURIComponent(t)),e}function i(t,e){return e}var r,s,a;return r=t.prepare,s=t.replace,a=t.wildcard,r?r:r=s?e:t.wildcard?n:i}function a(t){function n(t){return function(n){return e.debounce(n,t)}}function i(t){return function(n){return e.throttle(n,t)}}var r,s,a;return r=t.limiter,s=t.rateLimitBy,a=t.rateLimitWait,r||(r=/^throttle$/i.test(s)?i(a):n(a)),r}function o(n){return function(i){function r(t){e.defer(function(){a.resolve(t)})}function s(t){e.defer(function(){a.reject(t)})}var a=t.Deferred();return n(i,r,s),a}}return function(n){var s,a;return s={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},n=e.mixin(s,n||{}),!n.datumTokenizer&&t.error("datumTokenizer is required"),!n.queryTokenizer&&t.error("queryTokenizer is required"),a=n.sorter,n.sorter=a?function(t){return t.sort(a)}:e.identity,n.local=e.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=r(n.remote),n}}(),h=function(){function n(t){t=l(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new u(t.remote):null,this.prefetch=t.prefetch?new c(t.prefetch):null,this.index=new o({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var r;return r=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=r),n},n.tokenizers=i,e.mixin(n.prototype,{__ttAdapter:function(){function t(t,e,i){return n.search(t,e,i)}function e(t,e){return n.search(t,e)}var n=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?n.reject():(r.add(e),r.prefetch.store(r.index.serialize()),void n.resolve())}var n,i,r=this;return n=t.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(e):n.resolve(),n.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,n,i){function r(t){var n=[];e.each(t,function(t){!e.some(s,function(e){return a.identify(t)===a.identify(e)})&&n.push(t)}),i&&i(n)}var s,a=this;return s=this.sorter(this.index.search(t)),n(this.remote?s.slice():s),this.remote&&s.length<this.sufficient?this.remote.get(t,r):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return a.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}();return h}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){if(!(i=n.call(null,r,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){if(i=n.call(null,r,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,a,o=this,c=arguments;return s=function(){i=null,n||(r=t.apply(o,c))},a=n&&!i,clearTimeout(i),i=setTimeout(s,e),a&&(r=t.apply(o,c)),r}},throttle:function(t,e){var n,i,r,s,a,o;return a=0,o=function(){a=new Date,r=null,s=t.apply(n,i)},function(){var c=new Date,u=e-(c-a);return n=this,i=arguments,u<=0?(clearTimeout(r),r=null,a=c,s=t.apply(n,i)):r||(r=setTimeout(o,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){function t(t){var a,o;return o=e.mixin({},s,t),a={css:r(),classes:o,html:n(o),selectors:i(o)},{css:a.css,html:a.html,classes:a.classes,selectors:a.selectors,mixin:function(t){e.mixin(t,a)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),i=function(){function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i,r;return i="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function(e,n){var r;return r=t.Event(i+e),(n=n||[]).unshift(r),this.$el.trigger.apply(this.$el,n),r},before:function(t){var e,n;return e=[].slice.call(arguments,1),n=this._trigger("before"+t,e),n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=r[t])&&this._trigger(e,[].slice.call(arguments,1))}}),n}(),r=function(){function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(c),n=i?o(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(c);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,a;if(!this._callbacks)return this;for(t=t.split(c),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),a=s(n.async,this,[e].concat(i)),r()&&u(a);return this}function s(t,e,n){function i(){for(var i,r=0,s=t.length;!i&&r<s;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function a(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function o(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var c=/\s+/,u=a();return{onSync:n,onAsync:e,off:i,trigger:r}}(),s=function(t){function n(t,n,i){for(var r,s=[],a=0,o=t.length;a<o;a++)s.push(e.escapeRegExChars(t[a]));return r=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function s(e){var n,i,s;return(n=o.exec(e.data))&&(s=t.createElement(r.tagName),r.className&&(s.className=r.className),i=e.splitText(n.index),i.splitText(n[0].length),s.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(s,i)),!!n}function a(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:a(n,e)}var o;r=e.mixin({},i,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],o=n(r.pattern,r.caseSensitive,r.wordsOnly),a(r.node,s))}}(window.document),a=function(){function n(n,r){n=n||{},n.input||t.error("input is missing"),r.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function a(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=o[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!a(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!a(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var n,i;n=s(t,this.query),i=!!n&&this.query.length!==t.length,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,n,i,r,s=this;return t=e.bind(this._onBlur,this),n=e.bind(this._onFocus,this),i=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",n).on("keydown.tt",i),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){o[t.which||t.keyCode]||e.defer(e.bind(s._onInput,s,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,
n=this.$input[0].selectionStart,e.isNumber(n)?n===t:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),o=function(){function n(n,r){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!o(n.name)&&t.error("invalid dataset name: "+n.name),r.mixin(this),this.highlight=!!n.highlight,this.name=n.name||u(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=a(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(t){function n(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:n}function a(n,i){function r(e){return t("<div>").text(i(e))}return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||r}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var c,u;return c={val:"tt-selectable-display",obj:"tt-selectable-object"},u=e.getIdGenerator(),n.extractData=function(e){var n=t(e);return n.data(c.obj)?{val:n.data(c.val)||"",obj:n.data(c.obj)||null}:null},e.mixin(n.prototype,r,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;n=this._getSuggestionsFragment(t,e),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,i){var r,a=this;return r=document.createDocumentFragment(),e.each(i,function(e){var i,s;s=a._injectQuery(n,e),i=t(a.templates.suggestion(s)).data(c.obj,e).data(c.val,a.displayFn(e)).addClass(a.classes.suggestion+" "+a.classes.selectable),r.appendChild(i[0])}),this.highlight&&s({className:this.classes.highlight,node:r,pattern:n}),t(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function(e){function n(t){a||(a=!0,t=(t||[]).slice(0,r.limit),o=t.length,r._overwrite(e,t),o<r.limit&&r.async&&r.trigger("asyncRequested",e))}function i(n){n=n||[],!s&&o<r.limit&&(r.cancel=t.noop,o+=n.length,r._append(e,n.slice(0,r.limit-o)),r.async&&r.trigger("asyncReceived",e))}var r=this,s=!1,a=!1,o=0;this.cancel(),this.cancel=function(){s=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,n,i),!a&&n([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),n}(),c=function(){function n(n,i){function r(e){var n=s.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(s.$node),new o(e,i)}var s=this;n=n||{},n.node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,r)}return e.mixin(n.prototype,r,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(i+e):r<n&&this.$node.scrollTop(i+(n-r))},bind:function(){var t,n=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i,r;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,r=i+t,r=(r+1)%(e.length+1)-1,r=r<-1?e.length-1:r,r===-1?null:e.eq(r)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?o.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function n(e){e.update(t)}var i=t!==this.query;return i&&(this.query=t,e.each(this.datasets,n)),i},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,n)}}),n}(),u=function(){function t(){c.apply(this,[].slice.call(arguments,0))}var n=c.prototype;return e.mixin(t.prototype,c.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),l=function(){function n(n,r){var s,a,o,c,u,l,h,d,f,p,m;n=n||{},n.input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),a=i(this,"deactivate","_onBlurred"),o=i(this,"isActive","isOpen","_onEnterKeyed"),c=i(this,"isActive","isOpen","_onTabKeyed"),u=i(this,"isActive","_onEscKeyed"),l=i(this,"isActive","open","_onUpKeyed"),h=i(this,"isActive","open","_onDownKeyed"),d=i(this,"isActive","isOpen","_onLeftKeyed"),f=i(this,"isActive","isOpen","_onRightKeyed"),p=i(this,"_openIfActive","_onQueryChanged"),m=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",a,this).onSync("enterKeyed",o,this).onSync("tabKeyed",c,this).onSync("escKeyed",u,this).onSync("upKeyed",l,this).onSync("downKeyed",h,this).onSync("leftKeyed",d,this).onSync("rightKeyed",f,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var r,s,a;r=document.activeElement,s=i.is(r),a=i.has(r).length>0,e.isMsie()&&(s||a)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,n,i,r,s,o,c;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=a.normalizeQuery(i),s=e.escapeRegExChars(r),o=new RegExp("^(?:"+s+")(.+$)","i"),c=o.exec(n.val),c&&this.input.setHint(i+c[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj))&&(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0)},autocomplete:function(t){var e,n,i;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),i=n&&e!==n.val,!(!i||this.eventBus.before("autocomplete",n.obj))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0)},moveCursor:function(t){var e,n,i,r,s;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),r=i?i.obj:null,s=this._minLengthMet()&&this.menu.update(e),!s&&!this.eventBus.before("cursorchange",r)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){function r(e,n){e.each(function(){var e,i=t(this);(e=i.data(m.typeahead))&&n(e,i)})}function s(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function o(t,e){t.data(m.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(n){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var n,i;n=t.data(m.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(m.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}function f(n){var i,r;return i=e.isJQuery(n)||e.isElement(n),r=i?t(n).first():[],r.length?r:null}var p,m,g;p=t.fn.typeahead,m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},g={initialize:function(r,h){function d(){var n,d,g,y,v,_,b,w,k,x,C;e.each(h,function(t){t.highlight=!!r.highlight}),n=t(this),d=t(p.html.wrapper),g=f(r.hint),y=f(r.menu),v=r.hint!==!1&&!g,_=r.menu!==!1&&!y,v&&(g=s(n,p)),_&&(y=t(p.html.menu).css(p.css.menu)),g&&g.val(""),n=o(n,p),(v||_)&&(d.css(p.css.wrapper),n.css(v?p.css.input:p.css.inputWithNoHint),n.wrap(d).parent().prepend(v?g:null).append(_?y:null)),C=_?u:c,b=new i({el:n}),w=new a({hint:g,input:n},p),k=new C({node:y,datasets:h},p),x=new l({input:w,menu:k,eventBus:b,minLength:r.minLength},p),n.data(m.www,p),n.data(m.typeahead,x)}var p;return h=e.isArray(h)?h:[].slice.call(arguments,1),r=r||{},p=n(r.classNames),this.each(d)},isEnabled:function(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return r(this,function(t){t.enable()}),this},disable:function(){return r(this,function(t){t.disable()}),this},isActive:function(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function(){return r(this,function(t){t.activate()}),this},deactivate:function(){return r(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function(){return r(this,function(t){t.open()}),this},close:function(){return r(this,function(t){t.close()}),this},select:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.select(i)}),n},autocomplete:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.autocomplete(i)}),n},moveCursor:function(t){var e=!1;return r(this.first(),function(n){e=n.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return r(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return g[t]?g[t].apply(this,[].slice.call(arguments,1)):g.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=p,this}}()}),jQuery(function(t){function e(){var i={action:"meetings",search:t("#search input[name=query]").val().replace(/[";:,.\/?\\-]/g," ").trim(),day:t("#day li.active a").attr("data-id"),time:t("#time li.active a").attr("data-id"),region:t("#region li.active a").attr("data-id"),type:t("#type li.active a").attr("data-id")},r={};if(i.search&&(r.sq=i.search),r.d=i.day?i.day:"any",i.time&&(r.i=i.time),i.region&&(r.r=i.region),i.type&&(r.t=i.type),r.v=t("#meetings .toggle-view.active").attr("data-id"),r=jQuery.param(r),history.pushState){var s=window.location.protocol+"//"+window.location.host+window.location.pathname;r.length&&(s=s+"?"+r),location.search.indexOf("post_type=meetings")>-1&&(s=s+(s.indexOf("?")>-1?"&":"?")+"post_type=meetings"),window.history.pushState({path:s},"",s)}jQuery.post(myAjax.ajaxurl,i,function(r){if(r.length){t("#meetings table").removeClass("hidden"),t("#meetings #map").hasClass("hidden")&&(t("#meetings #map").removeClass("hidden"),google.maps.event.trigger(map,"resize")),t("#alert").addClass("hidden");var s=[],o=t("#meetings_tbody").html("");jQuery.each(r,function(t,e){jQuery.inArray("M",e.types)!=-1?e.name+=" <small>Men</small>":jQuery.inArray("W",e.types)!=-1&&(e.name+=" <small>Women</small>"),s[e.location_id]||(s[e.location_id]={name:e.location,formatted_address:e.formatted_address,latitude:e.latitude,longitude:e.longitude,url:e.location_url,meetings:[]}),s[e.location_id].meetings[s[e.location_id].meetings.length]={name:e.name,time:e.time_formatted,day:e.day,notes:e.notes,url:e.url};var n=e.day+"-"+("00:00"==e.time?"23:59":e.time);o.append('<tr><td class="time" data-sort="'+n+"-"+sanitize_title(e.location)+'"><span>'+(i.day||!e.day?e.time_formatted:days[e.day]+"</span><span>"+e.time_formatted)+'</span></td><td class="name" data-sort="'+sanitize_title(e.name)+"-"+n+'">'+formatLink(e.url,e.name,"post_type")+'</td><td class="location" data-sort="'+sanitize_title(e.location)+"-"+n+'">'+e.location+'</td><td class="address" data-sort="'+sanitize_title(e.formatted_address)+"-"+n+'">'+formatAddress(e.formatted_address,!0)+'</td><td class="region" data-sort="'+sanitize_title(e.sub_region||e.region||"")+"-"+n+'">'+(e.sub_region||e.region||"")+'</td><td class="types" data-sort="'+sanitize_title(a(e.types))+"-"+n+'">'+a(e.types)+"</td></tr>")}),n(),i.search&&t("#meetings .results tbody").mark(i.search);for(var c=0;c<markers.length;c++)markers[c].setMap(null);markers=[],bounds=new google.maps.LatLngBounds,loadMap(s)}else{if(i.search&&("undefined"!=typeof i.day||"undefined"!=typeof i.region||"undefined"!=typeof i.time||"undefined"!=typeof i.type))return t("#day li").removeClass("active").first().addClass("active"),t("#time li").removeClass("active").first().addClass("active"),t("#region li").removeClass("active").first().addClass("active"),t("#type li").removeClass("active").first().addClass("active"),t("#day span.selected").html(t("#day li:first-child a").html()),t("#time span.selected").html(t("#time li:first-child a").html()),t("#region span.selected").html(t("#region li:first-child a").html()),t("#type span.selected").html(t("#type li:first-child a").html()),e();t("#meetings table").addClass("hidden"),t("#meetings #map").addClass("hidden"),t("#alert").html("No results matched those criteria.").removeClass("hidden")}},"json")}function n(){for(var e=t("#meetings table thead th[data-sort]").first(),n=(e.attr("class"),e.attr("data-sort")),i=document.getElementById("meetings_tbody"),r=[],s=t("#meetings table thead th").index(e),a=0,o=i.rows.length;a<o;a++){var c=i.rows[a];r.push([c.cells[s].getAttribute("data-sort"),c])}r.sort(function(t,e){return t[0]>e[0]?"asc"==n?1:-1:t[0]<e[0]?"asc"==n?-1:1:0});for(var a=0,o=r.length;a<o;a++)i.appendChild(r[a][1])}function i(){t("body").hasClass("tsml_fullscreen")&&(t("body").removeClass("tsml_fullscreen"),t('a[href="#fullscreen"]').removeClass("active"),t('a[href="#fullscreen"]').parent().removeClass("active"),t("#map").css("height",550))}function r(){var e=(new Date).getDay(),n=t("#day li.active a").first().attr("data-id"),i=t("#time li.active a").first().attr("data-id");e!=n?(t("#time li.upcoming").addClass("hidden"),"upcoming"==i&&(t("#time li.active").removeClass("active"),t("#time li").first().addClass("active"),t("#time span.selected").html(t("#time li a").first().text()))):t("#time li.upcoming").removeClass("hidden")}function s(){var e="";t("#meetings #day li.active").index()&&(e+=t("#meetings #day span.selected").text()),t("#meetings #time li.active").index()&&(e+=" "+t("#meetings #time span.selected").text()),t("#meetings #type li.active").index()&&(e+=" "+t("#meetings #type span.selected").text()),e+=" Meetings",t("#meetings #region li.active").index()&&(e+=" in "+t("#meetings #region span.selected").text()),document.title=e}function a(t){for(var e=[],n=0;n<t.length;n++)e[e.length]=myAjax.types[t[n]];return e.sort(),e.join(", ")}t('#meeting #feedback a[href="#feedback"]').click(function(e){e.preventDefault(),t(this).closest("#feedback").toggleClass("form")}),t('#meeting #feedback a[href="#cancel"]').click(function(e){e.preventDefault(),t(this).closest("#feedback").toggleClass("form")}),t("#meeting #feedback form").validate({onfocusout:!1,onkeyup:function(t){},highlight:function(e,n,i){t(e).closest("div.form-group").addClass("has-error")},unhighlight:function(e,n,i){t(e).closest("div.form-group").removeClass("has-error")},errorPlacement:function(t,e){},submitHandler:function(e){var n=t(e),i=n.closest("#feedback"),r=i.find(".alert").first();return t.post(myAjax.ajaxurl,n.serialize(),function(t){r.removeClass("alert-danger").addClass("alert-warning").html(t),i.attr("class","confirm")}).fail(function(t){r.removeClass("alert-warning").addClass("alert-danger").html("Email was not sent."),i.attr("class","confirm")}),!1}});var o;"https:"===location.protocol&&navigator.geolocation&&t("li.geolocator").removeClass("hidden"),r();var c=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:myAjax.ajaxurl+"?action=tsml_regions",cache:!1}}),u=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:myAjax.ajaxurl+"?action=tsml_groups",cache:!1}}),l=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:myAjax.ajaxurl+"?action=tsml_locations",cache:!1}});new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:myAjax.ajaxurl+"?action=tsml_meetings",cache:!1}});t('#meetings #search input[name="query"]').typeahead({highlight:!0},{name:"tsml_regions",display:"value",source:c,templates:{header:"<h3>"+myAjax.strings.regions+"</h3>"}},{name:"tsml_groups",display:"value",source:u,templates:{header:"<h3>"+myAjax.strings.groups+"</h3>"}},{name:"tsml_locations",display:"value",source:l,templates:{header:"<h3>"+myAjax.strings.locations+"</h3>"}}).on("typeahead:selected",function(n,i){if("region"==i.type){t("#region li").removeClass("active");var r=t('#region li a[data-id="'+i.id+'"]');r.parent().addClass("active"),t("#region span.selected").html(r.html()),t('#search input[name="query"]').val("").typeahead("val",""),e()}else"location"==i.type?location.href=i.url:"group"==i.type&&e()}),t("#meetings table thead").on("click","th",function(){var e,i=t(this).attr("class");e=t(this).attr("data-sort")&&"asc"==t(this).attr("data-sort")?"desc":"asc",t("#meetings table thead th").removeAttr("data-sort"),t("#meetings table thead th."+i).attr("data-sort",e),n()}),t("#meetings #search").submit(function(t){return e(),!1});var h=t("#meetings #search input[name=query]");h.size()&&h.val().length&&t("#meetings .results tbody").mark(h.val()),t("#meetings .controls").on("click","div.expand",function(e){e.preventDefault(),e.stopPropagation(),t(this).next("ul.children").slideToggle(),t(this).toggleClass("expanded")}),t("#meetings .controls").on("click",".dropdown-menu a",function(n){n.preventDefault(),"day"==t(this).closest(".dropdown").attr("id")&&(t("#day li").removeClass("active"),t("#day span.selected").html(t(this).html())),"time"==t(this).closest(".dropdown").attr("id")&&(t("#time li").removeClass("active"),t("#time span.selected").html(t(this).html())),"region"==t(this).closest(".dropdown").attr("id")&&(t("#region li").removeClass("active"),t("#region span.selected").html(t(this).html())),"type"==t(this).closest(".dropdown").attr("id")&&(t("#type li").removeClass("active"),t("#type span.selected").html(t(this).html())),t(this).parent().toggleClass("active"),r(),s(),e()}),t("#meetings #action .toggle-view").click(function(e){e.preventDefault();var n=t(this).attr("data-id"),r=t("#meetings").attr("data-type");if(history.pushState){var s=updateQueryString("v",n);window.history.pushState({path:s},"",s)}"list"==n?(i(),t("#meetings #action .toggle-view[data-id=list]").addClass("active"),t("#meetings #action .toggle-view[data-id=map]").removeClass("active")):"map"==n&&(t("#meetings #action .toggle-view[data-id=map]").addClass("active"),t("#meetings #action .toggle-view[data-id=list]").removeClass("active")),t("#meetings").attr("data-type",n),"map"==n&&n!=r&&(google.maps.event.trigger(map,"resize"),map.fitBounds(bounds),1==markers.length&&t("#map").is(":visible")&&(map.setZoom(14),google.maps.event.trigger(markers[0],"click")))}),t('a[href="#geolocator"]').click(function(e){e.preventDefault(),t(this).toggleClass("active"),t(this).hasClass("active")?navigator.geolocation.getCurrentPosition(function(t){var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);o=new google.maps.Marker({icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",position:e,map:map,title:"You"}),map.setCenter(e),map.setZoom(13)},function(e){t(this).removeClass("active")}):void 0!==o&&o.setMap(null)}),t('a[href="#fullscreen"]').click(function(e){e.preventDefault();var n=map.getCenter();if(t(this).toggleClass("active"),t(this).hasClass("active")){t("body").addClass("tsml_fullscreen");var r=t(window).height()-79;t("body").hasClass("admin-bar")&&(r-=32),t("#map").css("height",r)}else i();google.maps.event.trigger(map,"resize"),map.setCenter(n)}),t(document).keyup(function(t){27==t.keyCode&&i()}),t("body").hasClass("post-type-archive-meetings")&&s(),t(window).resize(function(e){if(t("#meetings").hasClass("tsml_fullscreen")){var n=map.getCenter(),i=t(window).height()-79;t("body").hasClass("admin-bar")&&(i-=32),t("#map").css("height",i),google.maps.event.trigger(map,"resize"),map.setCenter(n)}})});var markers=[],map=new google.maps.Map(document.getElementById("map"),{panControl:!1,mapTypeControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}}),bounds=new google.maps.LatLngBounds,days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],infowindow=new google.maps.InfoWindow;